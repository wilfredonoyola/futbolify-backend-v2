# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  userId: ID!
  email: String!
  birthday: DateTime
  phone: String!
  roles: [UserRole!]!
  isOnboardingCompleted: Boolean!
  createdAt: Int!
  updatedAt: Int!
  userName: String!
  name: String
  avatarUrl: String
  googleId: String
  authProvider: String
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""The roles a user can have in the system"""
enum UserRole {
  USER
  ADMIN
  SUPER_ADMIN
}

type SigninOutputDto {
  id: ID!
  access_token: String!
  isOnboardingCompleted: Boolean!
  avatarUrl: String
  name: String
  userName: String
  roles: [UserRole!]!
}

type UserOutputDto {
  id: String!
  email: String!
  name: String
  phone: String
  roles: [UserRole!]!
}

type GoogleSigninResponse {
  email: String!
  userName: String!
  name: String
  avatarUrl: String
  isProfileCompleted: Boolean!
}

type TimelineEventDto {
  type: String!
  detail: String!
  team: String!
  player: String
  assist: String
  minute: Int!
  isHome: Boolean
  importance: Float
}

type BettingAnalysisDto {
  recommendedBet: String!
  confidence: Int!
  reason: String!
  odds: Float!
  timestamp: String!
}

type PossessionDto {
  home: Int!
  away: Int!
}

type LiveMatchOutputDto {
  id: Int!
  homeTeam: String!
  awayTeam: String!
  minute: Int
  scoreHome: Int!
  scoreAway: Int!
  shots: Int
  shotsOnTarget: Int
  dangerousAttacks: Int
  corners: Int
  pressureScore: Float
  recentActivityScore: Float
  hasRecentActivity: Boolean
  possession: PossessionDto
  xG: Float
  attacks: PossessionDto
  bigChances: PossessionDto
  bettingAnalysis: BettingAnalysisDto
  marketAvailable: Boolean
  lastEventType: String
  isGoodForOver05: Boolean
  isGoodForOver15: Boolean
  isLateMatch: Boolean
  bookmakers: [String!]
  timeline: [TimelineEventDto!]
  state: MatchState
  yellowCards: Int
  redCards: Int
  offsides: Int
  shotsOffTarget: Int
}

enum MatchState {
  NotStarted
  FirstHalf
  HalfTime
  SecondHalf
  Finished
  Normal
  Potential
  ReadyToBet
  NoBet
  NoLateValue
  ModerateLateValue
  HighLateValue
}

type Team {
  id: ID!
  name: String!
  color: TeamColor!
  code: String!
  createdBy: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  matchCount: Int
  mediaCount: Int
  memberCount: Int
}

"""Available team colors"""
enum TeamColor {
  GREEN
  BLUE
  RED
  YELLOW
  PURPLE
  ORANGE
  PINK
  BLACK
  WHITE
}

type TeamMember {
  id: ID!
  teamId: ID!
  userId: ID!
  role: MemberRole!
  joinedAt: DateTime!
}

"""Role of a member in a team"""
enum MemberRole {
  ADMIN
  MEMBER
}

type TeamMatch {
  id: ID!
  teamId: ID!
  date: DateTime!
  opponent: String
  location: String
  createdBy: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  photoCount: Int
  videoCount: Int
  highlightCount: Int
}

type MediaTag {
  id: ID!
  mediaId: ID!
  userId: ID!
  taggedBy: ID!
  createdAt: DateTime!
}

type Media {
  id: ID!
  matchId: ID!
  uploadedBy: ID!
  type: MediaType!
  url: String!
  thumbnailUrl: String
  category: MediaCategory
  isHighlight: Boolean!
  duration: Float
  videoId: String
  storagePath: String
  embedUrl: String
  processingStatus: String
  createdAt: DateTime!
  updatedAt: DateTime!
  tags: [MediaTag!]
}

"""Type of media content"""
enum MediaType {
  PHOTO
  VIDEO
}

"""Category of media content"""
enum MediaCategory {
  GOAL
  PLAY
  FAIL
}

type Notification {
  id: ID!
  userId: ID!
  type: NotificationType!
  title: String!
  message: String!
  imageUrl: String
  actionUrl: String
  isRead: Boolean!
  emailSent: Boolean!
  actorId: ID
  mediaId: ID
  teamId: ID
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""Type of notification"""
enum NotificationType {
  TAG
  TEAM_JOIN
  INVITE_ACCEPTED
  NEW_MEDIA
  MENTION
}

type PendingTag {
  id: ID!
  mediaId: ID!
  teamId: ID!
  name: String!
  phone: String
  inviteCode: String!
  status: PendingTagStatus!
  createdBy: ID!
  claimedBy: ID
  claimedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  inviteUrl: String!
  media: Media
  createdByUser: User
}

"""Status of a pending tag invitation"""
enum PendingTagStatus {
  PENDING
  CLAIMED
  CANCELLED
}

type TeamMemberWithUser {
  id: ID!
  teamId: ID!
  userId: ID!
  role: MemberRole!
  joinedAt: DateTime!
  user: User
}

type TeamWithMembers {
  id: ID!
  name: String!
  color: TeamColor!
  code: String!
  createdBy: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
  matchCount: Int
  mediaCount: Int
  memberCount: Int
  members: [TeamMemberWithUser!]!
}

type ProfileStats {
  goalCount: Int!
  videoCount: Int!
  photoCount: Int!
}

type Query {
  user(email: String!): UserOutputDto
  users: [UserOutputDto!]!
  liveMatches: [LiveMatchOutputDto!]!
  lateMatches(options: LateMatchOptionsDto): [LiveMatchOutputDto!]!
  matchById(id: Float!): LiveMatchOutputDto
  myTeams: [Team!]!
  team(id: ID!): TeamWithMembers!
  teamByCode(code: String!): Team!
  teamMembers(teamId: ID!): [TeamMember!]!
  teamMembersWithUser(teamId: ID!): [TeamMemberWithUser!]!
  teamMatches(teamId: ID!): [TeamMatch!]!
  teamMatch(id: ID!): TeamMatch!
  matchMedia(matchId: ID!, filters: MediaFiltersInput): [Media!]!
  media(id: ID!): Media!
  myTaggedMedia(type: String): [Media!]!
  allMyMedia(type: String): [Media!]!
  profileStats(userId: ID): ProfileStats!
  allMyProfileStats: ProfileStats!
  pendingTags(mediaId: ID!): [PendingTag!]!
  teamPendingInvitations(teamId: ID!): [PendingTag!]!
  myPendingTags: [PendingTag!]!
  pendingTagByCode(inviteCode: String!): PendingTag
  notifications(limit: Int! = 50): [Notification!]!
  unreadNotificationCount: Int!
}

input LateMatchOptionsDto {
  minMinute: Int
  minPressureScore: Float
  requireRecentActivity: Boolean
  maxGoals: Int
}

input MediaFiltersInput {
  type: MediaType
  category: MediaCategory
  isHighlight: Boolean
}

type Mutation {
  signin(userInput: SigninInputDto!): SigninOutputDto!
  Signup(userInput: SignupInputDto!): Boolean!
  ConfirmSignup(confirmInput: ConfirmSignupInputDto!): SigninOutputDto!
  forgotPassword(email: String!): Boolean!
  confirmForgotPassword(userInput: ConfirmPasswordInputDto!): Boolean!
  resendVerificationCode(email: String!): Boolean!
  addUser(userInput: AddUserInputDto!): UserOutputDto!
  googleSignin(idToken: String!): GoogleSigninResponse!
  completeProfile(updateProfileInput: UpdateProfileInputDto!): Boolean!
  updateUser(id: String!, updateUserInput: UpdateUserInput!): UserOutputDto!
  removeUser(id: String!): Boolean!
  createTeam(input: CreateTeamInput!): Team!
  updateTeam(id: ID!, input: UpdateTeamInput!): Team!
  deleteTeam(id: ID!): Boolean!
  joinTeam(code: String!): Team!
  leaveTeam(teamId: ID!): Boolean!
  removeTeamMember(teamId: ID!, userId: ID!): Boolean!
  updateMemberRole(teamId: ID!, userId: ID!, role: String!): TeamMember!
  createMatch(input: CreateMatchInput!): TeamMatch!
  updateMatch(id: ID!, input: UpdateMatchInput!): TeamMatch!
  deleteMatch(id: ID!): Boolean!
  uploadPhoto(matchId: ID!, file: Upload!, category: String, isHighlight: Boolean = false): Media!
  uploadVideo(matchId: ID!, file: Upload!, category: String, isHighlight: Boolean = false): Media!
  uploadMedia(input: UploadMediaInput!): Media!
  batchUploadMedia(inputs: [UploadMediaInput!]!): [Media!]!
  updateMedia(id: ID!, input: UpdateMediaInput!): Media!
  deleteMedia(id: ID!): Boolean!
  toggleHighlight(mediaId: ID!): Media!
  tagUsersInMedia(mediaId: ID!, userIds: [ID!]!): Boolean!
  selfTagMedia(mediaId: ID!): Boolean!
  removeMediaTag(mediaId: ID!, userId: ID!): Boolean!
  createPendingTag(input: CreatePendingTagInput!): PendingTag!
  cancelPendingTag(id: ID!): Boolean!
  claimPendingTag(inviteCode: String!): PendingTag!

  """Claim all pending tags by phone number (called after registration)"""
  claimPendingTagsByPhone(phone: String!): Boolean!
  markNotificationAsRead(notificationId: ID!): Notification
  markAllNotificationsAsRead: Int!
}

input SigninInputDto {
  email: String!
  password: String!
}

input SignupInputDto {
  email: String!
  password: String!
}

input ConfirmSignupInputDto {
  email: String!
  verificationCode: String!
  password: String!
  phone: Float!
  userName: String!
  birthday: DateTime!
}

input ConfirmPasswordInputDto {
  email: String!
  newPassword: String!
  verificationCode: String!
}

input AddUserInputDto {
  email: String!
  password: String!
  phone: Float!
  role: UserRole
  name: String
}

input UpdateProfileInputDto {
  userName: String!
  birthday: DateTime!
  phone: String
  password: String!
  idToken: String!
}

input UpdateUserInput {
  roles: [UserRole!]
  name: String
}

input CreateTeamInput {
  name: String!
  color: TeamColor!
}

input UpdateTeamInput {
  name: String
  color: TeamColor
}

input CreateMatchInput {
  teamId: ID!
  date: DateTime!
  opponent: String
  location: String
}

input UpdateMatchInput {
  date: DateTime
  opponent: String
  location: String
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

input UploadMediaInput {
  matchId: ID!
  type: MediaType!
  url: String!
  thumbnailUrl: String
  category: MediaCategory
  isHighlight: Boolean = false
  duration: Float
}

input UpdateMediaInput {
  thumbnailUrl: String
  category: MediaCategory
  isHighlight: Boolean
  duration: Float
}

input CreatePendingTagInput {
  mediaId: ID!
  name: String!
  phone: String
}